import{r as j,k as g,l as v,m as e,z as y,F as L,A as z,c as T,B as ge,C as te,D as _e,d as X,E as M,G as A,H as W,t as N,I as O,J as P,K as D,q as k,v as C,L as B,x as ve,y as be,_ as he,f as G,M as Z,o as le,N as ie}from"./entry.de0ceeb0.js";const ye={__name:"importButton",emits:["load"],setup(i,{emit:o}){const u=j(null),d=m=>{const b=m.target.files[0],c=new FileReader;c.onload=x=>o("load",x.target.result),c.readAsText(b)};return(m,b)=>(g(),v(L,null,[e("button",{class:"blue outlined px-4",type:"button",onClick:b[0]||(b[0]=c=>y(u).click())}," Import Existing VCF "),e("input",{ref_key:"vcf",ref:u,class:"hidden",type:"file",onChange:d},null,544)],64))}},we=te(),q=()=>({flashID:1,configuration:{author:null,description:null,version:we.public.version,lightables:[],statics:[],useServerSirens:!1,sounds:[{name:"MainHorn",allowUse:!0,audioString:"SIRENS_AIRHORN",soundSet:null},{name:"NineMode",allowUse:!1},{name:"SrnTone1",allowUse:!0,audioString:"VEHICLES_HORNS_SIREN_1",soundSet:"DLC_WMSIRENS_SOUNDSET"},{name:"SrnTone2",allowUse:!0,audioString:"VEHICLES_HORNS_SIREN_2",soundSet:"DLC_WMSIRENS_SOUNDSET"},{name:"SrnTone3",allowUse:!0,audioString:"VEHICLES_HORNS_POLICE_WARNING",soundSet:"DLC_WMSIRENS_SOUNDSET"},{name:"SrnTone4",allowUse:!0,audioString:"VEHICLES_HORNS_AMBULANCE_WARNING",soundSet:"DLC_WMSIRENS_SOUNDSET"}],patterns:[{name:"PRIMARY",isEmergency:!0,flashHighBeam:!1,enableWarningBeep:!1,loopPreview:!0,isPlayingPreview:!1},{name:"SECONDARY",isEmergency:!0,flashHighBeam:!1,enableWarningBeep:!1,loopPreview:!0,isPlayingPreview:!1},{name:"REARREDS",isEmergency:!0,flashHighBeam:!1,enableWarningBeep:!1,loopPreview:!0,isPlayingPreview:!1}],flashes:[]}}),Se=_e,I=()=>ge("vcfConfiguration",()=>xe()),xe=()=>localStorage.getItem("vcfConfiguration")!==null&&localStorage.getItem("saveVcfLocal")==="1"?JSON.parse(localStorage.getItem("vcfConfiguration")):q();z(I().value,i=>{localStorage.setItem("vcfUpdate",String(Se.now().toUnixInteger())),localStorage.setItem("vcfConfiguration",JSON.stringify(i))});const Ee=()=>{I().value.flashID=q().flashID,I().value.configuration=q().configuration},me=i=>I().value.configuration.flashes.map(u=>u.id).indexOf(i.id),ae=i=>!I().value.configuration.statics.map(o=>o.id).includes(i),ne=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],oe=[1,2,3,4,5,6,7,8,9,10,11,12],H=i=>I().value.configuration.lightables.map(o=>o.id).includes(i),K=T(()=>ne.filter(i=>!H(i))),J=T(()=>oe.filter(i=>!H(i))),$e=i=>{I().value.configuration.statics.push(i)},Ce=i=>{const o=I(),u=o.value.configuration.statics.map(d=>d.id).indexOf(i.id);o.value.configuration.statics.splice(u,1)},Ie=i=>{const o=I(),u={id:o.value.flashID++,pattern:i.name,duration:100,extras:[],miscs:[]};o.value.configuration.flashes.push(u)},Ae=(i,o)=>{const u=I(),d=me(o);d!==-1&&u.value.configuration.flashes.splice(d,1)},Ve=(i,o,u)=>{const d=I(),m=me(o),b=d.value.configuration.flashes[m].extras,c=d.value.configuration.flashes[m].miscs;typeof u.id=="number"?b.includes(u.id)?b.splice(b.indexOf(u.id),1):b.push(u.id):c.includes(u.id)?c.splice(c.indexOf(u.id),1):typeof u.id=="string"&&c.push(u.id)},ke=i=>{const o=I();o.value.flashID=i.flashID,o.value.configuration=i.configuration};function Le(i,o){return g(),v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M12 5.25c1.213 0 2.415.046 3.605.135a3.256 3.256 0 013.01 3.01c.044.583.077 1.17.1 1.759L17.03 8.47a.75.75 0 10-1.06 1.06l3 3a.75.75 0 001.06 0l3-3a.75.75 0 00-1.06-1.06l-1.752 1.751c-.023-.65-.06-1.296-.108-1.939a4.756 4.756 0 00-4.392-4.392 49.422 49.422 0 00-7.436 0A4.756 4.756 0 003.89 8.282c-.017.224-.033.447-.046.672a.75.75 0 101.497.092c.013-.217.028-.434.044-.651a3.256 3.256 0 013.01-3.01c1.19-.09 2.392-.135 3.605-.135zm-6.97 6.22a.75.75 0 00-1.06 0l-3 3a.75.75 0 101.06 1.06l1.752-1.751c.023.65.06 1.296.108 1.939a4.756 4.756 0 004.392 4.392 49.413 49.413 0 007.436 0 4.756 4.756 0 004.392-4.392c.017-.223.032-.447.046-.672a.75.75 0 00-1.497-.092c-.013.217-.028.434-.044.651a3.256 3.256 0 01-3.01 3.01 47.953 47.953 0 01-7.21 0 3.256 3.256 0 01-3.01-3.01 47.759 47.759 0 01-.1-1.759L6.97 15.53a.75.75 0 001.06-1.06l-3-3z","clip-rule":"evenodd"})])}function Ne(i,o){return g(),v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M15.75 2.25H21a.75.75 0 01.75.75v5.25a.75.75 0 01-1.5 0V4.81L8.03 17.03a.75.75 0 01-1.06-1.06L19.19 3.75h-3.44a.75.75 0 010-1.5zm-10.5 4.5a1.5 1.5 0 00-1.5 1.5v10.5a1.5 1.5 0 001.5 1.5h10.5a1.5 1.5 0 001.5-1.5V10.5a.75.75 0 011.5 0v8.25a3 3 0 01-3 3H5.25a3 3 0 01-3-3V8.25a3 3 0 013-3h8.25a.75.75 0 010 1.5H5.25z","clip-rule":"evenodd"})])}function Me(i,o){return g(),v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M5.478 5.559A1.5 1.5 0 016.912 4.5H9A.75.75 0 009 3H6.912a3 3 0 00-2.868 2.118l-2.411 7.838a3 3 0 00-.133.882V18a3 3 0 003 3h15a3 3 0 003-3v-4.162c0-.299-.045-.596-.133-.882l-2.412-7.838A3 3 0 0017.088 3H15a.75.75 0 000 1.5h2.088a1.5 1.5 0 011.434 1.059l2.213 7.191H17.89a3 3 0 00-2.684 1.658l-.256.513a1.5 1.5 0 01-1.342.829h-3.218a1.5 1.5 0 01-1.342-.83l-.256-.512a3 3 0 00-2.684-1.658H3.265l2.213-7.191z","clip-rule":"evenodd"}),e("path",{"fill-rule":"evenodd",d:"M12 2.25a.75.75 0 01.75.75v6.44l1.72-1.72a.75.75 0 111.06 1.06l-3 3a.75.75 0 01-1.06 0l-3-3a.75.75 0 011.06-1.06l1.72 1.72V3a.75.75 0 01.75-.75z","clip-rule":"evenodd"})])}function Ue(i,o){return g(),v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M6.912 3a3 3 0 00-2.868 2.118l-2.411 7.838a3 3 0 00-.133.882V18a3 3 0 003 3h15a3 3 0 003-3v-4.162c0-.299-.045-.596-.133-.882l-2.412-7.838A3 3 0 0017.088 3H6.912zm13.823 9.75l-2.213-7.191A1.5 1.5 0 0017.088 4.5H6.912a1.5 1.5 0 00-1.434 1.059L3.265 12.75H6.11a3 3 0 012.684 1.658l.256.513a1.5 1.5 0 001.342.829h3.218a1.5 1.5 0 001.342-.83l.256-.512a3 3 0 012.684-1.658h2.844z","clip-rule":"evenodd"})])}function Fe(i,o){return g(),v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M9.528 1.718a.75.75 0 01.162.819A8.97 8.97 0 009 6a9 9 0 009 9 8.97 8.97 0 003.463-.69.75.75 0 01.981.98 10.503 10.503 0 01-9.694 6.46c-5.799 0-10.5-4.701-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 01.818.162z","clip-rule":"evenodd"})])}function Te(i,o){return g(),v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{d:"M15 6.75a.75.75 0 00-.75.75V18a.75.75 0 00.75.75h.75a.75.75 0 00.75-.75V7.5a.75.75 0 00-.75-.75H15zM20.25 6.75a.75.75 0 00-.75.75V18c0 .414.336.75.75.75H21a.75.75 0 00.75-.75V7.5a.75.75 0 00-.75-.75h-.75zM5.055 7.06C3.805 6.347 2.25 7.25 2.25 8.69v8.122c0 1.44 1.555 2.343 2.805 1.628l7.108-4.061c1.26-.72 1.26-2.536 0-3.256L5.055 7.061z"})])}function Oe(i,o){return g(),v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M4.5 5.653c0-1.426 1.529-2.33 2.779-1.643l11.54 6.348c1.295.712 1.295 2.573 0 3.285L7.28 19.991c-1.25.687-2.779-.217-2.779-1.643V5.653z","clip-rule":"evenodd"})])}function Re(i,o){return g(),v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{d:"M12 2.25a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM7.5 12a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM18.894 6.166a.75.75 0 00-1.06-1.06l-1.591 1.59a.75.75 0 101.06 1.061l1.591-1.59zM21.75 12a.75.75 0 01-.75.75h-2.25a.75.75 0 010-1.5H21a.75.75 0 01.75.75zM17.834 18.894a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 10-1.061 1.06l1.59 1.591zM12 18a.75.75 0 01.75.75V21a.75.75 0 01-1.5 0v-2.25A.75.75 0 0112 18zM7.758 17.303a.75.75 0 00-1.061-1.06l-1.591 1.59a.75.75 0 001.06 1.061l1.591-1.59zM6 12a.75.75 0 01-.75.75H3a.75.75 0 010-1.5h2.25A.75.75 0 016 12zM6.697 7.757a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 00-1.061 1.06l1.59 1.591z"})])}function Y(i,o){return g(),v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M5.47 5.47a.75.75 0 011.06 0L12 10.94l5.47-5.47a.75.75 0 111.06 1.06L13.06 12l5.47 5.47a.75.75 0 11-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 01-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 010-1.06z","clip-rule":"evenodd"})])}const Pe={class:"flex flex-col justify-center h-full"},De={class:"px-5 pt-3 flex items-center gap-4"},Be=e("h2",null,"Lightables",-1),He=["disabled"],je=["disabled"],ze={class:"p-3 overflow-x-auto"},We={class:"table-auto w-full"},qe=e("thead",{class:"text-xs font-semibold uppercase text-gray-400 bg-gray-50"},[e("tr",null,[e("th",null,"Lightable type"),e("th",null,"Lightable ID"),e("th",null,"Allow env light"),e("th",null,"Color"),e("th")])],-1),Xe={class:"text-sm divide-y divide-gray-100"},Ye={class:"font-bold"},Ge=["onUpdate:modelValue","onChange"],Ke=["disabled"],Je=["disabled"],Ze=["onUpdate:modelValue"],Qe=["value","disabled"],et=["disabled","value"],tt={class:"cb-label"},nt=["onUpdate:modelValue"],ot={class:"flex items-center gap-4"},st=["title","onUpdate:modelValue","disabled"],lt=e("option",{value:null},"Choose...",-1),it=["value"],at=["onClick"],rt={key:1},ct=e("td",{colspan:"5"},[e("em",null,[C("You have not configured any lightables. Create one by clicking the '"),e("strong",null,"New extra"),C("' or '"),e("strong",null,"New misc"),C("' button.")])],-1),ut=[ct],dt=X({__name:"lights",setup(i){const o=["blue","amber","red","green","white"],u=I(),d=c=>u.value.configuration.lightables.splice(c,1),m=(c=null,x=null)=>{if(x==="extra"||(c==null?void 0:c.type)==="extra")return J.value[0]??null;if(x==="misc"||(c==null?void 0:c.type)==="misc")return K.value[0]??null},b=(c="extra")=>{u.value.configuration.lightables.push({type:c,id:m(null,c),enabled:!0,allowEnv:!1,color:null})};return(c,x)=>(g(),v("div",Pe,[e("header",De,[Be,e("button",{class:"disabled:!bg-gray-300 disabled:!text-gray-500 disabled:!cursor-not-allowed blue",type:"button",onClick:x[0]||(x[0]=w=>b("extra")),disabled:("availableExtraIds"in c?c.availableExtraIds:y(J)).length===0},"New extra",8,He),e("button",{class:"disabled:!bg-gray-300 disabled:!text-gray-500 disabled:!cursor-not-allowed blue",type:"button",onClick:x[1]||(x[1]=w=>b("misc")),disabled:("availableMiscIds"in c?c.availableMiscIds:y(K)).length===0},"New misc",8,je)]),e("div",ze,[e("table",We,[qe,e("tbody",Xe,[y(u).configuration.lightables.length?(g(!0),v(L,{key:0},M(y(u).configuration.lightables,(w,h)=>(g(),v("tr",{key:w.id},[e("td",Ye,[A(e("select",{"onUpdate:modelValue":n=>w.type=n,onChange:n=>w.id=m(w)},[e("option",{value:"extra",disabled:("availableExtraIds"in c?c.availableExtraIds:y(J)).length===0},"Extra",8,Ke),e("option",{value:"misc",disabled:("availableMiscIds"in c?c.availableMiscIds:y(K)).length===0},"Misc",8,Je)],40,Ge),[[W,w.type]])]),e("td",null,[A(e("select",{"onUpdate:modelValue":n=>w.id=n},[w.type==="extra"?(g(!0),v(L,{key:0},M("extraIds"in c?c.extraIds:y(oe),n=>(g(),v("option",{key:"extra_"+n,value:n,disabled:("isLightableIdInUse"in c?c.isLightableIdInUse:y(H))(n)},N(n),9,Qe))),128)):w.type==="misc"?(g(!0),v(L,{key:1},M("miscIds"in c?c.miscIds:y(ne),n=>(g(),v("option",{key:"misc_"+n,disabled:("isLightableIdInUse"in c?c.isLightableIdInUse:y(H))(n),value:n},N(n),9,et))),128)):O("",!0)],8,Ze),[[W,w.id]])]),e("td",null,[e("label",tt,[A(e("input",{"onUpdate:modelValue":n=>w.allowEnv=n,type:"checkbox"},null,8,nt),[[P,w.allowEnv]])])]),e("td",ot,[e("div",{class:D(["w-8 h-8 px-2 py-1 rounded-md inline-block",w.color])},null,2),A(e("select",{class:D(w.allowEnv?"":"cursor-not-allowed"),title:w.allowEnv?"":"You need to allow env light to change the color","onUpdate:modelValue":n=>w.color=n,disabled:!w.allowEnv},[lt,(g(),v(L,null,M(o,n=>e("option",{key:n,value:n},N(n),9,it)),64))],10,st),[[W,w.color]])]),e("td",null,[e("button",{class:"red",type:"button",onClick:n=>d(h)},[k(y(Y),{class:"w-5 h-5"})],8,at)])]))),128)):(g(),v("tr",rt,ut))])])])]))}}),ft={class:"flex flex-col justify-center h-full"},ht={class:"px-5 pt-3 flex items-center"},mt=e("h2",{class:"mr-4"},"Statics",-1),pt=["disabled"],gt={class:"p-3 overflow-x-auto"},_t={class:"table-auto w-full"},vt=e("thead",{class:"text-xs font-semibold uppercase text-gray-400 bg-gray-50"},[e("tr",null,[e("th",null,"Lightable type"),e("th",null,"Lightable id"),e("th",null,"Name"),e("th")])],-1),bt={class:"text-sm divide-y divide-gray-100"},yt=["onUpdate:modelValue"],wt=["disabled"],St=["disabled"],xt=["onUpdate:modelValue"],Et=["value","disabled"],$t=["value","disabled"],Ct=["onUpdate:modelValue"],It=["onClick"],At={key:1},Vt=e("td",{colspan:"3"},[e("em",null,[C("You have not configured any statics. Create one by clicking the '"),e("strong",null,"New"),C("' button. Please be aware that you need to add 'Lightables' before you can mark them as static.")])],-1),kt=[Vt],Lt=X({__name:"statics",setup(i){const o=I(),u=h=>I().value.configuration.statics.map(n=>n.id).includes(h),d=T(()=>oe.filter(h=>H(h))),m=T(()=>ne.filter(h=>H(h))),b=T(()=>m.value.filter(h=>!u(h))),c=T(()=>d.value.filter(h=>!u(h))),x=()=>{$e({id:null,type:"extra",name:null})},w=h=>{Ce(h)};return(h,n)=>(g(),v("div",ft,[e("header",ht,[mt,e("button",{class:"blue",type:"button",onClick:x,disabled:!y(b).length&&!y(c).length},"New",8,pt)]),e("div",gt,[e("table",_t,[vt,e("tbody",bt,[y(o).configuration.statics.length?(g(!0),v(L,{key:0},M(y(o).configuration.statics,(a,f)=>(g(),v("tr",{key:f},[e("td",null,[A(e("select",{"onUpdate:modelValue":l=>a.type=l},[e("option",{value:"extra",disabled:y(c).length===0},"Extra",8,wt),e("option",{value:"misc",disabled:y(b).length===0},"Misc",8,St)],8,yt),[[W,a.type,void 0,{number:!0}]])]),e("td",null,[A(e("select",{"onUpdate:modelValue":l=>a.id=l},[a.type==="extra"?(g(!0),v(L,{key:0},M(y(d),l=>(g(),v("option",{value:l,key:`extra_${l}`,disabled:u(l)},N(l),9,Et))),128)):(g(!0),v(L,{key:1},M(y(m),l=>(g(),v("option",{value:l,key:`misc_${l}`,disabled:u(l)},N(l),9,$t))),128))],8,xt),[[W,a.id,void 0,{number:!0}]])]),e("td",null,[A(e("input",{"onUpdate:modelValue":l=>a.name=l,type:"text"},null,8,Ct),[[B,a.name]])]),e("td",null,[e("button",{type:"button",class:"red",onClick:l=>w(a)}," × ",8,It)])]))),128)):(g(),v("tr",At,kt))])])])]))}}),Nt={class:"flex flex-col justify-center h-full"},Mt={class:"px-5 pt-3 flex items-center"},Ut=e("h2",{class:"mr-4"},"Sounds",-1),Ft={for:"useServerSirens",class:"cb-label"},Tt={class:"underline flex items-center",href:"https://github.com/Walsheyy/WMServerSirens",target:"_blank"},Ot={class:"p-3 overflow-x-auto"},Rt={class:"table-auto w-full"},Pt={class:"text-xs font-semibold uppercase text-gray-400 bg-gray-50"},Dt=e("th",null,"Option",-1),Bt=e("th",null,"Allow use",-1),Ht=e("th",null,"Audio string",-1),jt={key:0},zt={class:"text-sm divide-y divide-gray-100"},Wt={class:"font-bold"},qt=["for"],Xt=["id","onUpdate:modelValue"],Yt=["onUpdate:modelValue"],Gt={key:0},Kt=["onUpdate:modelValue"],Jt={__name:"sounds",setup(i){const o=I(),u=["ALPHA","BRAVO","CHARLIE","DELTA","ECHO","FOXTROT","GOLF","HOTEL","INDIA","JULIETT","KILO","LIMA","MIKE","NOVEMBER","OSCAR","PAPA","QUEBEC","ROMEO","SIERRA","TANGO","UNIFORM","VICTOR","WHISKEY","X-RAY","YANKEE","ZULU"];return z(()=>o.value.configuration.useServerSirens,()=>{if(o.value.configuration.useServerSirens){let d=0;o.value.configuration.sounds.forEach(m=>{["MainHorn","NineMode"].includes(m.name)||(m.audioString=`SIREN_${u[d]}`,d++)})}else o.value.configuration.sounds.forEach(d=>{["MainHorn","NineMode"].includes(d.name)||(d.audioString=q().configuration.sounds.find(m=>m.name===d.name).audioString)})}),(d,m)=>(g(),v("div",Nt,[e("header",Mt,[Ut,e("label",Ft,[A(e("input",{class:"mr-2",id:"useServerSirens","onUpdate:modelValue":m[0]||(m[0]=b=>y(o).configuration.useServerSirens=b),type:"checkbox"},null,512),[[P,y(o).configuration.useServerSirens]]),C(" Use  "),e("a",Tt,[C("WMServerSirens "),k(y(Ne),{class:"ml-2 w-4 h-auto"})])])]),e("div",Ot,[e("table",Rt,[e("thead",Pt,[e("tr",null,[Dt,Bt,Ht,y(o).configuration.useServerSirens?(g(),v("th",jt,"Soundset")):O("",!0)])]),e("tbody",zt,[(g(!0),v(L,null,M(y(o).configuration.sounds,(b,c)=>(g(),v("tr",{key:c},[e("td",Wt,N(b.name),1),e("td",null,[e("label",{for:`allowUse[${c}]`,class:"cb-label"},[A(e("input",{id:`allowUse[${c}]`,"onUpdate:modelValue":x=>b.allowUse=x,type:"checkbox"},null,8,Xt),[[P,b.allowUse]])],8,qt)]),e("td",null,[b.allowUse&&b.audioString!==void 0?A((g(),v("input",{key:0,"onUpdate:modelValue":x=>b.audioString=x,type:"text"},null,8,Yt)),[[B,b.audioString]]):O("",!0)]),b.allowUse&&y(o).configuration.useServerSirens?(g(),v("td",Gt,[b.soundSet!==void 0?A((g(),v("input",{key:0,"onUpdate:modelValue":x=>b.soundSet=x,type:"text"},null,8,Kt)),[[B,b.soundSet]]):O("",!0)])):O("",!0)]))),128))])])])]))}},se=i=>(ve("data-v-261e9456"),i=i(),be(),i),Zt={class:"flex flex-col justify-center h-full"},Qt=se(()=>e("header",{class:"px-5 pt-3"},[e("h2",null,"Patterns")],-1)),en={class:"px-5 pt-3 flex items-center gap-4"},tn={class:"font-bold"},nn=["onClick"],on=["for"],sn=["id","onUpdate:modelValue"],ln=["for"],an=["id","onUpdate:modelValue"],rn=["for"],cn=["id","onUpdate:modelValue"],un={class:"p-3 overflow-x-auto"},dn={class:"table-auto w-full"},fn=se(()=>e("thead",{class:"text-xs font-semibold uppercase text-gray-400 bg-gray-50"},[e("tr",null,[e("th",null,"Duration"),e("th",null,"Extras"),e("th",null,"Miscs"),e("th")])],-1)),hn=se(()=>e("td",{class:"pt-4 pb-8 align-top font-semibold text-sm w-32"}," Preview ",-1)),mn={class:"pt-4 pb-8 align-top"},pn=["id"],gn={class:"pt-4 pb-8 align-top"},_n=["id"],vn={class:"pt-4 pb-8 align-top"},bn={class:"flex gap-4"},yn=["onClick"],wn=["onClick"],Sn=["onClick"],xn={class:"text-sm divide-y divide-gray-100"},En={class:"w-32"},$n=["onUpdate:modelValue"],Cn={class:"py-4"},In=["onClick"],An=["onClick"],Vn=["onClick"],kn=X({__name:"patterns",setup(i){const o=I(),u=T(()=>o.value.configuration.lightables.filter(a=>a.enabled&&a.type==="extra"&&ae(a.id))),d=T(()=>o.value.configuration.lightables.filter(a=>a.enabled&&a.type==="misc"&&ae(a.id))),m=a=>{Ie(a)},b=(a,f)=>{Ae(a,f)},c=async a=>{var l,s;a.isPlayingPreview=!0;const f=n(a);for(const t of f){for(const r of t.extras){const _=u.value.find(p=>p.id===r),E=h(_);document.querySelector(`#${a.name}_extra_${r}`).classList.toggle(E)}for(const r of t.miscs){const _=d.value.find(p=>p.id===r),E=h(_);(l=document.querySelector(`#${a.name}_misc_${r}`))==null||l.classList.toggle(E)}await new Promise(r=>{setTimeout(r,t.duration)});for(const r of t.extras){const _=u.value.find(p=>p.id===r),E=h(_);(s=document.querySelector(`#${a.name}_extra_${r}`))==null||s.classList.toggle(E)}for(const r of t.miscs){const _=d.value.find(p=>p.id===r),E=h(_);document.querySelector(`#${a.name}_misc_${r}`).classList.toggle(E)}}if(a!=null&&a.loopPreview&&(a!=null&&a.isPlayingPreview))return await c(a);a.isPlayingPreview=!1},x=(a,f,l)=>{Ve(a,f,l)},w=(a,f)=>{const l=o.value.configuration.flashes.map(r=>r.id).indexOf(a.id),s=o.value.configuration.flashes[l].extras,t=o.value.configuration.flashes[l].miscs;return Number(f.id)?s.includes(f.id):t.includes(f.id)},h=a=>(a==null?void 0:a.color)??"nocolor",n=a=>o.value.configuration.flashes.filter(f=>f.pattern===a.name);return(a,f)=>(g(),v("div",Zt,[Qt,(g(!0),v(L,null,M(y(o).configuration.patterns,(l,s)=>(g(),v("div",{key:s},[e("header",en,[e("h3",tn,N(l.name),1),e("button",{class:"blue",type:"button",onClick:t=>m(l)}," Add flash ",8,nn),e("label",{for:`isEmergency[${s}]`,class:"cb-label"},[A(e("input",{class:"mr-2",id:`isEmergency[${s}]`,"onUpdate:modelValue":t=>l.isEmergency=t,type:"checkbox"},null,8,sn),[[P,l.isEmergency]]),C(" Is emergency ")],8,on),e("label",{for:`flashHighBeam[${s}]`,class:"cb-label"},[A(e("input",{class:"mr-2",id:`flashHighBeam[${s}]`,"onUpdate:modelValue":t=>l.flashHighBeam=t,type:"checkbox"},null,8,an),[[P,l.flashHighBeam]]),C(" Flash high beam ")],8,ln),e("label",{for:`enableWarningBeep[${s}]`,class:"cb-label"},[A(e("input",{class:"mr-2",id:`enableWarningBeep[${s}]`,"onUpdate:modelValue":t=>l.enableWarningBeep=t,type:"checkbox"},null,8,cn),[[P,l.enableWarningBeep]]),C(" Enable warning beep ")],8,rn)]),e("div",un,[e("table",dn,[fn,e("tbody",null,[e("tr",null,[hn,e("td",mn,[(g(!0),v(L,null,M(y(u),(t,r)=>(g(),v("span",{key:r,id:`${l.name}_extra_${t.id}`,class:"light py-4"},N(t==null?void 0:t.id),9,pn))),128))]),e("td",gn,[(g(!0),v(L,null,M(y(d),(t,r)=>(g(),v("span",{key:r,class:"light",id:`${l.name}_misc_${t.id}`},N(t.id),9,_n))),128))]),e("td",vn,[e("div",bn,[l.isPlayingPreview?(g(),v("button",{key:1,type:"button",class:"amber",onClick:t=>{l.loopPreview=!1,l.isPlayingPreview=!1}},[k(y(Te),{class:"w-4 h-4"})],8,wn)):(g(),v("button",{key:0,type:"button",class:"green",onClick:t=>c(l)},[k(y(Oe),{class:"w-4 h-4"})],8,yn)),e("button",{type:"button",class:D(l.loopPreview?"blue border-[1px]":"blue outlined"),onClick:t=>l.loopPreview=!l.loopPreview},[k(y(Le),{class:"w-4 h-4"})],10,Sn)])])])]),e("tbody",xn,[(g(!0),v(L,null,M(n(l),(t,r)=>(g(),v("tr",{key:r},[e("td",En,[A(e("input",{"onUpdate:modelValue":_=>t.duration=_,type:"number",min:"0"},null,8,$n),[[B,t.duration,void 0,{number:!0}]])]),e("td",Cn,[(g(!0),v(L,null,M(y(u),(_,E)=>(g(),v("span",{key:E,class:D(["light",w(t,_)?h(_):""]),onClick:p=>x(l,t,_)},N(_.id),11,In))),128))]),e("td",null,[(g(!0),v(L,null,M(y(d),(_,E)=>(g(),v("span",{key:E,class:D(["light",w(t,_)?h(_):""]),onClick:p=>x(l,t,_)},N(_.id),11,An))),128))]),e("td",null,[e("button",{type:"button",class:"red",onClick:_=>b(l,t)},[k(y(Y),{class:"w-4 h-4"})],8,Vn)])]))),128))])])])]))),128))]))}});const Ln=he(kn,[["__scopeId","data-v-261e9456"]]),Nn=i=>{var h;const o=(h=te().public)==null?void 0:h.version,u=document.implementation.createDocument("","",null);[u.createComment(" THIS FILE WAS GENERATED BY THE MISS ELS VCF CONFIGURATOR "),u.createComment(" ELS VEHICLE CONFIGURATION FILE "),u.createComment("IF YOU DON'T KNOW WHAT YOU ARE DOING, READ THE DOCS: https://github.com/matsn0w/MISS-ELS/blob/main/docs/vcf.md")].forEach(n=>u.appendChild(n));const m=u.createElement("vcfroot");m.setAttribute("Description",i.description??""),m.setAttribute("Author",i.author??""),m.setAttribute("Version",o??""),u.appendChild(m);const b=u.createElement("EOVERRIDE");i.lightables.filter(n=>n.type==="extra").forEach(n=>{let a=`${n.id}`;a=a.replace(/(^[^\d\n]*\d[^\d\n]*$)/gm,"0$1");const f=u.createElement(`Extra${a}`);n.allowEnv&&(f.setAttribute("AllowEnvLight",n.allowEnv),n.color&&f.setAttribute("Color",n.color)),b.appendChild(f)}),i.lightables.filter(n=>n.type==="misc").forEach(n=>{let a=`${n.id}`;a=a.replace(/(^[^\d\n]*\d[^\d\n]*$)/gm,"0$1").toUpperCase();const f=u.createElement(`Misc${a}`);n.allowEnv&&(f.setAttribute("AllowEnvLight",n.allowEnv),n.color&&f.setAttribute("Color",n.color)),b.appendChild(f)}),m.appendChild(b);const c=u.createElement("STATIC");i.statics.forEach(n=>{let a="";n.type==="extra"?a=`Extra${n.id}`:n.type==="misc"&&(a=`Misc${String(n.id).toUpperCase()}`);const f=u.createElement(a);f.setAttribute("Name",n.name??a),c.appendChild(f)}),m.appendChild(c);const x=u.createElement("SOUNDS");i.sounds.forEach(n=>{const a=u.createElement(n.name);a.setAttribute("AllowUse",n.allowUse),n.allowUse&&n.audioString&&a.setAttribute("AudioString",n.audioString),n.allowUse&&i.useServerSirens&&n.soundSet&&a.setAttribute("SoundSet",n.soundSet),x.appendChild(a)}),m.appendChild(x);const w=u.createElement("PATTERN");return i.patterns.forEach(n=>{const a=u.createElement(n.name);a.setAttribute("IsEmergency",n.isEmergency),a.setAttribute("FlashHighBeam",n.flashHighBeam),a.setAttribute("EnableWarningBeep",n.enableWarningBeep),i.flashes.filter(l=>l.pattern===n.name).forEach(l=>{const s=u.createElement("Flash");l.duration&&s.setAttribute("Duration",l.duration),l.extras.length&&s.setAttribute("Extras",[...l.extras].sort().join(",")),l.miscs.length&&s.setAttribute("Miscs",[...l.miscs].sort().join(",")),a.appendChild(s)}),w.appendChild(a)}),m.appendChild(w),u},Mn=i=>{var s,t;const o={flashID:1,configuration:{author:null,description:null,version:null,lightables:[],statics:[],useServerSirens:!1,sounds:[],patterns:[],flashes:[]}},u=new DOMParser().parseFromString(i,"text/xml");o.configuration.description=u.querySelector("vcfroot").getAttribute("Description")??null,o.configuration.author=u.querySelector("vcfroot").getAttribute("Author"),o.configuration.version=u.querySelector("vcfroot").getAttribute("Version")??null;const d=u.querySelector("EOVERRIDE"),m=Array.from(d.querySelectorAll("*")),b=m.filter(r=>r.nodeName.startsWith("Extra")),c=m.filter(r=>r.nodeName.startsWith("Misc"));b.forEach(r=>{o.configuration.lightables.push({id:parseInt(r.nodeName.match(/([0-9]|[1-9][0-9])$/g)[0]),type:"extra",enabled:!0,allowEnv:r.getAttribute("AllowEnvLight")==="true",color:r.getAttribute("Color")??null})}),c.forEach(r=>{o.configuration.lightables.push({id:r.nodeName.match(/([A-Z])$/g)[0].toLowerCase(),type:"misc",enabled:!0,allowEnv:r.getAttribute("AllowEnvLight")==="true",color:r.getAttribute("Color")??null})});const x=u.querySelector("STATIC"),w=Array.from(x.querySelectorAll("*")),h=w.filter(r=>r.nodeName.startsWith("Extra")),n=w.filter(r=>r.nodeName.startsWith("Misc"));h.forEach(r=>{o.configuration.statics.push({id:parseInt(r.nodeName.match(/([0-9]|[1-9][0-9])$/g)[0]),type:"extra",name:r.getAttribute("Name")??r.nodeName})}),n.forEach(r=>{o.configuration.statics.push({id:r.nodeName.match(/([A-Z])$/g)[0].toLowerCase(),type:"misc",name:r.getAttribute("Name")??r.nodeName})});const a=u.querySelector("SOUNDS"),f=a==null?void 0:a.querySelectorAll("*");f==null||f.forEach(r=>{const _=r.nodeName==="NineMode";let E={name:r.nodeName,allowUse:r.getAttribute("AllowUse")==="true"};_||(E.audioString=r.getAttribute("AudioString"),E.soundSet=r.getAttribute("SoundSet")),o.configuration.sounds.push(E)}),f==null||f.forEach(r=>{r.getAttribute("SoundSet")!==null&&(o.configuration.useServerSirens=!0)});const l=u.querySelector("PATTERN");for(const r of l.children){o.configuration.patterns.push({name:r.nodeName,isEmergency:r.getAttribute("IsEmergency")==="true",flashHighBeam:r.getAttribute("FlashHighBeam")==="true",enableWarningBeep:r.getAttribute("EnableWarningBeep")==="true",loopPreview:!0,isPlayingPreview:!1});for(const _ of r.children){const E=((s=_.getAttribute("Extras"))==null?void 0:s.split(","))??[],p=((t=_.getAttribute("Miscs"))==null?void 0:t.split(","))??[];o.configuration.flashes.push({id:o.flashID++,duration:parseInt(_.getAttribute("Duration")||"")??100,extras:E.map(S=>parseInt(S))??[],miscs:p??[],pattern:r.nodeName})}}return o};var R=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Un(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var pe={exports:{}};(function(i,o){(function(u,d){d()})(R,function(){function u(h,n){return typeof n>"u"?n={autoBom:!1}:typeof n!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),n={autoBom:!n}),n.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\uFEFF",h],{type:h.type}):h}function d(h,n,a){var f=new XMLHttpRequest;f.open("GET",h),f.responseType="blob",f.onload=function(){w(f.response,n,a)},f.onerror=function(){console.error("could not download file")},f.send()}function m(h){var n=new XMLHttpRequest;n.open("HEAD",h,!1);try{n.send()}catch{}return 200<=n.status&&299>=n.status}function b(h){try{h.dispatchEvent(new MouseEvent("click"))}catch{var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),h.dispatchEvent(n)}}var c=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof R=="object"&&R.global===R?R:void 0,x=c.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),w=c.saveAs||(typeof window!="object"||window!==c?function(){}:"download"in HTMLAnchorElement.prototype&&!x?function(h,n,a){var f=c.URL||c.webkitURL,l=document.createElement("a");n=n||h.name||"download",l.download=n,l.rel="noopener",typeof h=="string"?(l.href=h,l.origin===location.origin?b(l):m(l.href)?d(h,n,a):b(l,l.target="_blank")):(l.href=f.createObjectURL(h),setTimeout(function(){f.revokeObjectURL(l.href)},4e4),setTimeout(function(){b(l)},0))}:"msSaveOrOpenBlob"in navigator?function(h,n,a){if(n=n||h.name||"download",typeof h!="string")navigator.msSaveOrOpenBlob(u(h,a),n);else if(m(h))d(h,n,a);else{var f=document.createElement("a");f.href=h,f.target="_blank",setTimeout(function(){b(f)})}}:function(h,n,a,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof h=="string")return d(h,n,a);var l=h.type==="application/octet-stream",s=/constructor/i.test(c.HTMLElement)||c.safari,t=/CriOS\/[\d]+/.test(navigator.userAgent);if((t||l&&s||x)&&typeof FileReader<"u"){var r=new FileReader;r.onloadend=function(){var p=r.result;p=t?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=p:location=p,f=null},r.readAsDataURL(h)}else{var _=c.URL||c.webkitURL,E=_.createObjectURL(h);f?f.location=E:location.href=E,f=null,setTimeout(function(){_.revokeObjectURL(E)},4e4)}});c.saveAs=w.saveAs=w,i.exports=w})})(pe);var Fn=pe.exports,Q={exports:{}},ee={exports:{}};(function(i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.ParsingError=void 0;class u extends Error{constructor(S,$){super(S),this.cause=$}}o.ParsingError=u;let d;function m(){return w(!1)||f()||a()||n()}function b(){return t(/\s*/),w(!0)||a()||h()||x(!1)}function c(){const p=x(!0),S=[];let $,V=b();for(;V;){if(V.node.type==="Element"){if($)throw new Error("Found multiple root nodes");$=V.node}V.excluded||S.push(V.node),V=b()}if(!$)throw new u("Failed to parse XML","Root Element not found");if(d.xml.length!==0)throw new u("Failed to parse XML","Not Well-Formed XML");return{declaration:p?p.node:null,root:$,children:S}}function x(p){const S=t(p?/^<\?(xml)\s*/:/^<\?([\w-:.]+)\s*/);if(!S)return;const $={name:S[1],type:"ProcessingInstruction",attributes:{}};for(;!(r()||_("?>"));){const V=l();if(V)$.attributes[V.name]=V.value;else return}return t(/\?>/),{excluded:p?!1:d.options.filter($)===!1,node:$}}function w(p){const S=t(/^<([^?!</>\s]+)\s*/);if(!S)return;const $={type:"Element",name:S[1],attributes:{},children:[]},V=p?!1:d.options.filter($)===!1;for(;!(r()||_(">")||_("?>")||_("/>"));){const F=l();if(F)$.attributes[F.name]=F.value;else return}if(t(/^\s*\/>/))return $.children=null,{excluded:V,node:$};t(/\??>/);let U=m();for(;U;)U.excluded||$.children.push(U.node),U=m();if(d.options.strictMode){const F=`</${$.name}>`;if(d.xml.startsWith(F))d.xml=d.xml.slice(F.length);else throw new u("Failed to parse XML",`Closing tag not matching "${F}"`)}else t(/^<\/\s*[\w-:.\u00C0-\u00FF]+>/);return{excluded:V,node:$}}function h(){const p=t(/^<!DOCTYPE\s+\S+\s+SYSTEM[^>]*>/)||t(/^<!DOCTYPE\s+\S+\s+PUBLIC[^>]*>/)||t(/^<!DOCTYPE\s+\S+\s*\[[^\]]*]>/)||t(/^<!DOCTYPE\s+\S+\s*>/);if(p){const S={type:"DocumentType",content:p[0]};return{excluded:d.options.filter(S)===!1,node:S}}}function n(){if(d.xml.startsWith("<![CDATA[")){const p=d.xml.indexOf("]]>");if(p>-1){const S=p+3,$={type:"CDATA",content:d.xml.substring(0,S)};return d.xml=d.xml.slice(S),{excluded:d.options.filter($)===!1,node:$}}}}function a(){const p=t(/^<!--[\s\S]*?-->/);if(p){const S={type:"Comment",content:p[0]};return{excluded:d.options.filter(S)===!1,node:S}}}function f(){const p=t(/^([^<]+)/);if(p){const S={type:"Text",content:p[1]};return{excluded:d.options.filter(S)===!1,node:S}}}function l(){const p=t(/([^=]+)\s*=\s*("[^"]*"|'[^']*'|[^>\s]+)\s*/);if(p)return{name:p[1].trim(),value:s(p[2].trim())}}function s(p){return p.replace(/^['"]|['"]$/g,"")}function t(p){const S=d.xml.match(p);if(S)return d.xml=d.xml.slice(S[0].length),S}function r(){return d.xml.length===0}function _(p){return d.xml.indexOf(p)===0}function E(p,S={}){p=p.trim();const $=S.filter||(()=>!0);return d={xml:p,options:Object.assign(Object.assign({},S),{filter:$,strictMode:S.strictMode===!0})},c()}i.exports=E,o.default=E})(ee,ee.exports);var Tn=ee.exports;(function(i,o){var u=R&&R.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(o,"__esModule",{value:!0});const d=u(Tn);function m(s){if(!s.options.indentation&&!s.options.lineSeparator)return;s.content+=s.options.lineSeparator;let t;for(t=0;t<s.level;t++)s.content+=s.options.indentation}function b(s){s.content=s.content.replace(/ +$/,"");let t;for(t=0;t<s.level;t++)s.content+=s.options.indentation}function c(s,t){s.content+=t}function x(s,t,r){if(typeof s.content=="string")w(s.content,t,r);else if(s.type==="Element")n(s,t,r);else if(s.type==="ProcessingInstruction")f(s,t);else throw new Error("Unknown node type: "+s.type)}function w(s,t,r){if(!r){const _=s.trim();(t.options.lineSeparator||_.length===0)&&(s=_)}s.length>0&&(!r&&t.content.length>0&&m(t),c(t,s))}function h(s,t){const r="/"+s.join("/"),_=s[s.length-1];return t.includes(_)||t.includes(r)}function n(s,t,r){if(t.path.push(s.name),!r&&t.content.length>0&&m(t),c(t,"<"+s.name),a(t,s.attributes),s.children===null||t.options.forceSelfClosingEmptyTag&&s.children.length===0){const _=t.options.whiteSpaceAtEndOfSelfclosingTag?" />":"/>";c(t,_)}else if(s.children.length===0)c(t,"></"+s.name+">");else{const _=s.children;c(t,">"),t.level++;let E=s.attributes["xml:space"]==="preserve",p=!1;if(!E&&t.options.ignoredPaths&&(p=h(t.path,t.options.ignoredPaths),E=p),!E&&t.options.collapseContent){let S=!1,$=!1,V=!1;_.forEach(function(U,F){U.type==="Text"?(U.content.includes(`
`)?($=!0,U.content=U.content.trim()):(F===0||F===_.length-1)&&U.content.trim().length===0&&(U.content=""),U.content.trim().length>0&&(S=!0)):U.type==="CDATA"?S=!0:V=!0}),S&&(!V||!$)&&(E=!0)}_.forEach(function(S){x(S,t,r||E)}),t.level--,!r&&!E&&m(t),p&&b(t),c(t,"</"+s.name+">")}t.path.pop()}function a(s,t){Object.keys(t).forEach(function(r){const _=t[r].replace(/"/g,"&quot;");c(s," "+r+'="'+_+'"')})}function f(s,t){t.content.length>0&&m(t),c(t,"<?"+s.name),a(t,s.attributes),c(t,"?>")}function l(s,t={}){t.indentation="indentation"in t?t.indentation:"    ",t.collapseContent=t.collapseContent===!0,t.lineSeparator="lineSeparator"in t?t.lineSeparator:`\r
`,t.whiteSpaceAtEndOfSelfclosingTag=t.whiteSpaceAtEndOfSelfclosingTag===!0,t.throwOnFailure=t.throwOnFailure!==!1;try{const r=(0,d.default)(s,{filter:t.filter,strictMode:t.strictMode}),_={content:"",level:0,options:t,path:[]};return r.declaration&&f(r.declaration,_),r.children.forEach(function(E){x(E,_,!1)}),t.lineSeparator?_.content.replace(/\r\n/g,`
`).replace(/\n/g,t.lineSeparator):_.content}catch(r){if(t.throwOnFailure)throw r;return s}}l.minify=(s,t={})=>l(s,Object.assign(Object.assign({},t),{indentation:"",lineSeparator:""})),i.exports=l,o.default=l})(Q,Q.exports);var On=Q.exports;const Rn=Un(On),Pn=X({components:{InboxArrowDownIcon:Me,XMarkIcon:Y,InboxIcon:Ue},props:{state:{type:String,required:!0},isForNotice:{type:Boolean,default:!1}},emits:["click"]}),Dn={key:1,class:"relative"},Bn={key:2,class:"ml-2"};function Hn(i,o,u,d,m,b){const c=G("InboxArrowDownIcon"),x=G("InboxIcon"),w=G("XMarkIcon");return g(),v("button",{onClick:o[0]||(o[0]=h=>i.$emit("click")),class:D(["blue flex items-center",i.isForNotice?"!text-white p-2":"outlined p-3"])},[i.state==="1"?(g(),Z(c,{key:0,class:"w-4 h-4"})):(g(),v("div",Dn,[k(x,{class:"w-4 h-4"}),k(w,{class:"w-4 h-4 absolute top-0 left-0"})])),i.isForNotice?(g(),v("span",Bn,N(i.state==="1"?"Disable":"Enable")+" local VCF storage",1)):O("",!0)],2)}const re=he(Pn,[["render",Hn]]),jn=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,ce=i=>{if(typeof i!="string")throw new TypeError("Invalid argument expected string");const o=i.match(jn);if(!o)throw new Error(`Invalid argument not valid semver ('${i}' received)`);return o.shift(),o},ue=i=>i==="*"||i==="x"||i==="X",de=i=>{const o=parseInt(i,10);return isNaN(o)?i:o},zn=(i,o)=>typeof i!=typeof o?[String(i),String(o)]:[i,o],Wn=(i,o)=>{if(ue(i)||ue(o))return 0;const[u,d]=zn(de(i),de(o));return u>d?1:u<d?-1:0},fe=(i,o)=>{for(let u=0;u<Math.max(i.length,o.length);u++){const d=Wn(i[u]||"0",o[u]||"0");if(d!==0)return d}return 0},qn=(i,o)=>{const u=ce(i),d=ce(o),m=u.pop(),b=d.pop(),c=fe(u,d);return c!==0?c:m&&b?fe(m.split("."),b.split(".")):m||b?m?-1:1:0},Xn={class:"flex justify-between items-center my-4"},Yn=e("h1",{class:"text-2xl font-bold"},"MISS ELS VCF Configurator",-1),Gn={class:"flex gap-4"},Kn={key:0,class:"py-4"},Jn={class:"rounded-md bg-yellow-50 p-4"},Zn={class:"flex"},Qn=e("h3",{class:"text-sm font-medium text-yellow-800"},"Attention! From now on, we are storing data in the browser's memory.",-1),eo=e("div",{class:"mt-2 text-sm"},[e("p",{class:"!text-yellow-700 font-normal"},[C(" To prevent data loss, we store your current VCF in your local browser data."),e("br"),C(" When you revisit the configurator, the last VCF file you modified will be loaded again."),e("br"),C(" Do you not want this? Or do you want to start with an empty VCF? Then you can disable local storage."),e("br"),C(" This can be done via the button below or the button at the top right."),e("br"),C(" Resetting can be done via the button below or at the very bottom of the page. ")])],-1),to={class:"mt-4"},no={class:"-mx-2 -my-1.5 flex gap-4"},oo={class:"ml-auto pl-3"},so={class:"-mx-1.5 -my-1.5"},lo=e("span",{class:"sr-only"},"Dismiss",-1),io=["onSubmit"],ao={class:"md:flex md:items-center mb-3"},ro=e("label",{for:"description"},"Description",-1),co={class:"md:flex md:items-center mb-3"},uo=e("label",{for:"author"},"Author",-1),fo={class:"md:flex md:items-center mb-3"},ho=e("label",{for:"version"},"VCF schema version",-1),mo={key:0,class:"border-l-4 border-yellow-400 bg-yellow-50 p-4"},po={class:"flex"},go=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495zM10 5a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 0110 5zm0 9a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})])],-1),_o={class:"ml-3"},vo={class:"text-sm !text-yellow-700"},bo=e("br",null,null,-1),yo=e("br",null,null,-1),wo={class:"font-medium"},So={class:"font-medium"},xo={class:"py-3 flex gap-4"},Eo=e("button",{class:"blue py-2 px-4",type:"submit"},"Generate VCF",-1),$o=["onClick"],Io={__name:"index",setup(i){const o=te(),u=T(()=>qn(n.value.configuration.version??"0.0.0",o.public.version)>=0),d=()=>{window.confirm("Are you sure you want to reset? All changes to the VCF will be lost.")&&Ee()},m=j(localStorage.getItem("theme")??"light"),b=()=>{var l,s;(l=document.getElementsByTagName("html")[0])==null||l.classList.remove(m.value),m.value=m.value==="light"?"dark":"light",(s=document.getElementsByTagName("html")[0])==null||s.classList.add(m.value)};le(()=>{var l;m.value||(m.value="light"),(l=document.getElementsByTagName("html")[0])==null||l.classList.add(m.value)}),z(()=>m.value,l=>{localStorage.setItem("theme",l)});const c=j(localStorage.getItem("saveVcfLocal")??"1"),x=()=>{c.value=c.value==="1"?"0":"1",c.value==="0"&&(localStorage.removeItem("vcfConfiguration"),localStorage.removeItem("vcfUpdated"))};le(()=>{c.value||(c.value="1")}),z(()=>c.value,l=>{localStorage.setItem("saveVcfLocal",l)});const w=j(!!Number(localStorage.getItem("hasReadLocalStorageNotice"))),h=()=>{window.confirm("Are you sure you want to dismiss this message? You will never see it again.")&&(w.value=!0,localStorage.setItem("hasReadLocalStorageNotice","1"))},n=I(),a=j(""),f=()=>{const l=Nn(n.value.configuration);let s=new XMLSerializer().serializeToString(l);s='<?xml version="1.0" encoding="utf-8" ?>'+s;const t=Rn(s,{whiteSpaceAtEndOfSelfclosingTag:!0}),r=new Blob([t],{type:"application/xml"}),_=n.value.description??"myVCF.xml";Fn.saveAs(r,_)};return z(a,(l,s)=>{if(l!==s){const t=Mn(l);ke(t)}}),(l,s)=>{const t=ye,r=dt,_=Lt,E=Jt,p=Ln;return g(),v(L,null,[e("div",Xn,[Yn,e("div",Gn,[k(t,{onLoad:s[0]||(s[0]=S=>a.value=S)}),e("button",{onClick:b,class:"blue outlined p-3 !text-yellow-400"},[y(m)==="dark"?(g(),Z(y(Re),{key:0,class:"w-4 h-4"})):(g(),Z(y(Fe),{key:1,class:"w-4 h-4"}))]),k(re,{state:y(c),onClick:x},null,8,["state"])])]),y(w)?O("",!0):(g(),v("div",Kn,[e("div",Jn,[e("div",Zn,[e("div",null,[Qn,eo,e("div",to,[e("div",no,[k(re,{state:y(c),onClick:x,isForNotice:!0},null,8,["state"]),e("button",{onClick:d,class:"amber p-2"}," Reset VCF ")])])]),e("div",oo,[e("div",so,[e("button",{type:"button",class:"amber p-1.5",onClick:h},[lo,k(y(Y),{class:"w-6 h-6"})])])])])])])),e("form",{onSubmit:ie(f,["prevent"])},[e("div",null,[e("div",ao,[ro,A(e("input",{id:"description","onUpdate:modelValue":s[1]||(s[1]=S=>y(n).configuration.description=S),type:"text"},null,512),[[B,y(n).configuration.description]])]),e("div",co,[uo,A(e("input",{id:"author","onUpdate:modelValue":s[2]||(s[2]=S=>y(n).configuration.author=S),type:"text"},null,512),[[B,y(n).configuration.author]])]),e("div",fo,[ho,e("p",null,N(y(n).configuration.version??"Unknown"),1)]),y(u)?O("",!0):(g(),v("div",mo,[e("div",po,[go,e("div",_o,[e("p",vo,[C(" Please be aware! The VCF you have imported was generated with an older version of the configurator. "),bo,C(" This means that some settings may not be available in the configurator, or have been enabled, disabled or changed by default. "),yo,C(" Your VCF schema version is "),e("span",wo,N(y(n).configuration.version??"Unknown"),1),C(", the latest version is "),e("span",So,N(y(o).public.version),1),C(". ")])])])]))]),k(r,{class:"card"}),k(_,{class:"card"}),k(E,{class:"card"}),k(p,{class:"card"}),e("div",xo,[Eo,e("button",{class:"amber py-2 px-4",type:"button",onClick:ie(d,["prevent"])},"Reset VCF",8,$o)])],40,io)],64)}}};export{Io as default};
